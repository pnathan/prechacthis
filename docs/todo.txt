- merge constraints first, fill in gap using states and tree.
- remove unused files and predicates
